{% if addToCartFormId is not empty %}
document.addEventListener("DOMContentLoaded", function(event) {
    var form = document.getElementById('{{ addToCartFormId }}');

    if (typeof(form) != 'undefined' && form != null) {
        document.querySelector("#{{ addToCartFormId }}").addEventListener("submit", (event) => {
            event.preventDefault();

            window.dataLayer = window.dataLayer || [];
            window.dataLayer.push({{ data | json_encode() | raw }});

            document.getElementById("{{ addToCartFormId }}").submit();
        });
    }

});
{% endif %}
